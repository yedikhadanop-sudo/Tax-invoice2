# Deployment Guide - Tax Invoice Generator Pro

This guide covers deploying the Tax Invoice Generator Pro application on Netlify.

## Prerequisites

- Git installed and configured
- GitHub account with repository access
- Netlify account (free tier available at https://app.netlify.com)
- Node.js 16+ installed locally (for testing before deployment)

## Pre-Deployment Checklist

- [ ] All features tested locally with `npm run dev`
- [ ] Build completes successfully: `npm run build`
- [ ] Production build previews correctly: `npm run preview`
- [ ] No console errors or warnings
- [ ] All dependencies installed: `npm install`
- [ ] .gitignore is properly configured
- [ ] netlify.toml is present in root directory
- [ ] README.md has been updated with current information

## Step-by-Step Deployment to Netlify

### Method 1: GitHub Integration (Recommended)

1. **Push to GitHub**
   ```bash
   git add .
   git commit -m "Deploy: Ready for production"
   git push origin main
   ```

2. **Connect to Netlify**
   - Go to https://app.netlify.com
   - Click "New site from Git"
   - Select "GitHub" as the provider
   - Authenticate and select your repository
   - Repository: `taxprint-pro-main`

3. **Configure Build Settings**
   - Build command: `npm run build`
   - Publish directory: `dist`
   - Environment variables: (none required currently)

4. **Deploy**
   - Click "Deploy site"
   - Netlify will automatically build and deploy
   - Your site will be available at `https://<auto-generated-name>.netlify.app`

5. **Custom Domain** (Optional)
   - In Netlify dashboard, go to Site settings > Domain management
   - Click "Add custom domain"
   - Follow the DNS configuration steps

### Method 2: Netlify CLI

1. **Install Netlify CLI**
   ```bash
   npm install -g netlify-cli
   ```

2. **Login to Netlify**
   ```bash
   netlify login
   ```
   - Browser will open to authorize
   - Authorize and return to terminal

3. **Initialize Site**
   ```bash
   netlify init
   ```
   - Choose "Create & configure a new site"
   - Enter team name and site name
   - Build command: `npm run build`
   - Publish directory: `dist`

4. **Deploy**
   ```bash
   netlify deploy --prod
   ```

### Method 3: Direct Upload (Drag & Drop)

1. **Build locally**
   ```bash
   npm run build
   ```

2. **Go to Netlify**
   - Visit https://app.netlify.com
   - Drag and drop the `dist` folder to deploy
   - Note: This creates temporary deployments for testing

## Post-Deployment

### Verify Deployment

1. Visit your Netlify URL
2. Test functionality:
   - [ ] Page loads without errors
   - [ ] Can add companies
   - [ ] Can add invoice items
   - [ ] PDF generation works
   - [ ] PDF downloads correctly
   - [ ] No console errors

3. Check Netlify Analytics
   - Go to Analytics tab in Netlify dashboard
   - Verify traffic is being tracked

### Monitoring

- **Netlify Logs**: Check build and deployment logs in Netlify dashboard
- **Browser Console**: Check for JavaScript errors (F12)
- **Network Tab**: Check API calls if any fail

### Troubleshooting

#### Build Fails
- Clear build cache: Netlify UI → Site settings → Build & deploy → Trigger deploy (clear cache option)
- Check build logs for specific errors
- Ensure Node.js version compatibility (check netlify.toml)
- Verify all dependencies in package.json are correct

#### Site Loads But Features Don't Work
- Check browser console for errors (F12)
- Verify all environment variables if used
- Check network requests in Network tab
- Restart build from Netlify dashboard

#### PDF Generation Issues
- Ensure @react-pdf/renderer is properly bundled
- Check browser console for specific errors
- Verify PDF filename doesn't have invalid characters
- Try different browser if issue persists

## Environment Variables (For Future Use)

To add environment variables:

1. **Netlify Dashboard**
   - Site settings → Build & deploy → Environment
   - Add new variables with "VITE_" prefix
   - Redeploy after adding

2. **Access in Code**
   ```typescript
   const apiUrl = import.meta.env.VITE_API_URL
   ```

3. **Local Development (.env.local)**
   ```env
   VITE_API_URL=http://localhost:3000
   ```

## Continuous Deployment

After initial setup, any push to the `main` branch will automatically:
- Trigger a new build
- Run through the build command
- Deploy to production if successful
- Update your live site

To prevent accidental deployments:
- Use branch protection rules on GitHub
- Require PR reviews before merging
- Set up preview deployments for branches

## Rollback

If needed to rollback to a previous deployment:
1. Netlify dashboard → Deploys
2. Find the previous successful deployment
3. Click the deployment
4. Click "Publish deploy"

## Performance Optimization

The production build includes:
- Code splitting for @react-pdf/renderer
- CSS minification
- JavaScript minification and compression
- Tree-shaking of unused code
- Asset caching headers for 1 year

Monitor performance:
- Use Netlify Analytics
- Check Page Speed Insights
- Monitor Core Web Vitals in Netlify dashboard

## Security

- HTTPS is automatically enabled on all Netlify sites
- Security headers configured in netlify.toml
- No API keys or secrets exposed in code
- Environment variables for sensitive data

## Support & Resources

- **Netlify Docs**: https://docs.netlify.com
- **Build Troubleshooting**: https://docs.netlify.com/troubleshooting/common-build-errors
- **GitHub Integration**: https://docs.netlify.com/git/github
- **Vite Guide**: https://vitejs.dev/guide/
- **React PDF Renderer**: https://react-pdf.org

## Next Steps

After successful deployment:
1. Share your live URL with users
2. Set up monitoring/analytics
3. Plan for feature updates
4. Consider adding backend API if needed
5. Implement user authentication if required
